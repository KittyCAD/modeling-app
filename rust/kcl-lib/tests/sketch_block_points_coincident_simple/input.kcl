@settings(experimentalFeatures = allow)

s = sketch(on = XY) {
  a1 = [1mm, 2mm]
  p2 = sketch2::point(at = [var, var])
  // Array point
  sketch2::coincident(a1, p2)
  p3 = sketch2::point(at = [var 3mm, var 4mm])
  a4 = [5in, 6in]
  // Point array
  sketch2::coincident(p3, a4)
}

assert(s.a1[0], isEqualTo = 1mm)
assert(s.a1[1], isEqualTo = 2mm)
assert(s.p2.at[0], isEqualTo = 1mm)
assert(s.p2.at[1], isEqualTo = 2mm)
// 5in = 127mm
// 6in = 152.4mm
assert(s.p3.at[0], isEqualTo = 127mm)
assert(s.p3.at[1], isEqualTo = 152.4mm)
// Since the array is known, it doesn't pass through the solver, so units are
// preserved.
assert(s.a4[0], isEqualTo = 5in)
assert(s.a4[1], isEqualTo = 6in)
